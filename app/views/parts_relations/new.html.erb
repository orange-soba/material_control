<%= render "shared/header" %>

<h1 class="function-title">必要部品登録</h1>

<%# 部品情報 %>
<div class="part-information">
  <table class="history-area-details">
    <tr>
      <% if @part.finished? %>
        <th>完成品名</th>
      <% else %>
        <th>部品名</th>
      <% end %>
      <td class="history-area__data"><%= @part.name %></td>
    </tr>
    <tr>
      <th>在庫数</th>
      <td class="history-area__data"><%= @part.stock %></td>
    </tr>
    <tr>
      <th>登録日時</th>
      <td class="history-area__data"><%= l @part.created_at %></td>
    </tr>
  </table>
</div>
<%# /部品情報 %>

<%# 登録エリア %>
<div class="register-need-parts-area">
  <div>上記完成品/部品作成に必要な部品を登録してください</div>
  <div class="register-need-parts">
    <%= form_with model: @parts_relation, url: part_parts_relations_path(@part), local: true do |f| %>
      <%# エラー情報の表示 %>
      <%= render 'shared/error_messages', model: f.object %>
      <%# /エラー情報の表示 %>
      
      <div class="input-field">
        <%= f.label :child_id, "作成に必要な部品：" %>
        <%= f.collection_select(:child_id, @parts, :id, :name, { include_blank: "---" }, class: "parts-relation__input") %><br>
      </div>

      <div class="input-field">
        <%= f.label :necessary_nums, "　　　　　必要数：" %>
        <%= f.text_field :necessary_nums, class: "parts-relation__input" %><br>
      </div>

      <%= f.submit "登録", class: "parts-relation__submit" %>
    <% end %>
  </div>
</div>
<%# /登録エリア %>